version: '3.7'

services:

  app:
    stdin_open: true
    build: ./
    volumes:
      - '.:/app'
      - '/app/node_modules'
    ports:
      - '3000:3000'
    environment:
      REACT_APP_SERVER_URL: http://localhost:9000/api
      SKIP_PREFLIGHT_CHECK: 'true'

  cypress:
    image: 'cypress/included:6.0.0'
    depends_on:
      - app
    working_dir: /e2e
    volumes:
      - ./cypress:/e2e/cypress
      - ./cypress.json:/e2e/cypress.json